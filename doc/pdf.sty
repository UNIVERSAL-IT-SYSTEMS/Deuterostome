\NeedsTeXFormat{LaTeX2e}%
% Copyright 2011 Alexander Peyser & Wolfgang Nonner
%
% This file is part of Deuterostome.
%
% This program is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 2 of the License, or
% (at your option) any later version.
%
% This program is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY% without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.
\ProvidesPackage{pdf}%
%
\def\pdf@ifpdf{
  \RequirePackage{ifpdf}%
  \ifpdf\def\pdf@pdfif##1##2{##1}\else\def\pdf@pdfif##1##2{##2}\fi%
}
\def\pdf@ifnotpdf{
  \ifx\pdfoutput\undefined \csname newcount\endcsname\pdfoutput \fi%
  \ifcase\pdfoutput\def\pdf@pdfif##1##2{##2}\else\def\pdf@pdfif##1##2{##1}\fi%
}
\IfFileExists{ifpdf.sty}{\pdf@ifpdf}{\pdf@ifnotpdf}%
%
\RequirePackage{options}%
%
\definebooloption{pdf}{fullscreen}{}%
\def\pdf@fullscreen{%
  \ifpdf@fullscreen\PassOptionsToPackage{pdfpagemode=FullScreen}{hyperref}\fi%
}%
%
\definefuncoption{pdf}{links}{std}{none,std,gray,grayoutline}{}%
\let\pdf@links@std=\relax%
%
\def\pdf@links@none{%
  \PassOptionsToPackage{colorlinks=true,linkcolor=black,urlcolor=black,%
    citecolor=black}{hyperref}%
}%
\def\pdf@links@gray{%
  \PassOptionsToPackage{%
    colorlinks=true,%
    linkcolor=graylink,%
    urlcolor=graylink,%
    citecolor=graylink%
  }{hyperref}%
  %
  \RequirePackage{color}%
  \definecolor{graylink}{rgb}{0,0,0.35}%
}%
%
\def\pdf@links@grayoutline{%
  \def\pdf@linkcolor{0.97 0.97 0.97}%
  \PassOptionsToPackage{%
    colorlinks=false,%
    linkbordercolor=\pdf@linkcolor,%
    urlbordercolor=\pdf@linkcolor,%
    citebordercolor=\pdf@linkcolor%
  }{hyperref}%
}%
%
\definebooloption{pdf}{bookmarks}{}%
\def\pdf@bookmarks{%
  \ifpdf@bookmarks%
  \PassOptionsToPackage{bookmarks,bookmarksopen,bookmarksnumbered}{hyperref}%
  \fi%
}%
%
\newlength\pdf@left@margin%
\newlength\pdf@right@margin%
\newlength\pdf@top@margin%
\newlength\pdf@bottom@margin%
\let\pdf@margin\relax%
\definefuncoption{pdf}{margin}{std}{std,hp}{}%
\def\pdf@margin@hp{%
  \setlength\pdf@left@margin{0.25in}%
  \setlength\pdf@right@margin{0.25in}%
  \setlength\pdf@top@margin{0.07in}%
  \setlength\pdf@bottom@margin{0.46in}%
}%
%
\def\pdf@margin@std{%
  \setlength\pdf@left@margin{0.25in}%
  \setlength\pdf@right@margin{0.25in}%
  \setlength\pdf@top@margin{0.25in}%
  \setlength\pdf@bottom@margin{0.56in}%
}%
%
\ProcessOptions\relax%
%
\pdf@fullscreen%
\pdf@links%
\pdf@bookmarks
\pdf@margin%
%
\pdf@pdfif{\pdfadjustspacing 2 \pdfcompresslevel 0}{}%
%
\PassOptionsToPackage{plainpages=false}{hyperref}%
\PassOptionsToPackage{\pdf@pdfif{pdftex}{dvips}}{graphicx}%
\PassOptionsToPackage{\pdf@pdfif{pdftex}{dvips}}{hyperref}%
%
\newcommand\includeboth{\@ifstar\pdf@@includeboth\pdf@includeboth}%
\newcommand\pdf@@includeboth[2][]{\pdf@includeboth{#1}{#1}{#2}}%
\newcommand\pdf@includeboth[3]{%
  \pdf@pdfif%
    {\includegraphics[#1]{#3.pdf}}%
    {\includegraphics[#2]{#3.eps}}%
}%
%  
\newcommand\includeeps[2][]{%
  \edef\file@pdf{\pdf@pdfif{#2.pdf}{#2.eps}}%
  \includegraphics[#1]{\file@pdf}%
}%
%
\newcommand\sethoffset[1]{%
  \setlength\hoffset{#1}%
  \pdf@pdfif{%
    \setlength\pdfhorigin{1in}%
    \addtolength\pdfhorigin{#1}%
    \addtolength\pdfhorigin{-\pdf@left@margin}%
  }{}%
}%
%
\newcommand\setvoffset[1]{%
  \setlength\voffset{#1}%
  \pdf@pdfif{%
    \setlength\pdfvorigin{1in}%
    \addtolength\pdfvorigin{#1}%
    \addtolength\pdfvorigin{-\pdf@top@margin}%
  }{}%
}%
%
\newcommand\setpaperwidth[1]{%
  \setlength\paperwidth{#1}%
  \pdf@pdfif{%
    \setlength\pdfpagewidth{#1}%
    \addtolength\pdfpagewidth{-\pdf@left@margin}%
    \addtolength\pdfpagewidth{-\pdf@right@margin}%
  }{}%
}%
%
\newcommand\setpaperheight[1]{%
  \setlength\paperheight{#1}%
  \pdf@pdfif{%
    \setlength\pdfpageheight{#1}%
    \addtolength\pdfpageheight{-\pdf@top@margin}%
    \addtolength\pdfpageheight{-\pdf@bottom@margin}%
  }{}%
}%
%
%\sethoffset{\hoffset}%
%\setvoffset{\voffset}%
%\setpaperheight{\paperheight}%
%\setpaperwidth{\paperwidth}%
%
\let\pdf@title=\@empty%
\let\pdf@author=\@empty%
\let\pdf@subject=\@empty%
\let\pdf@keywords=\@empty%
\newcommand\pdftitle[1]{\def\pdf@title{#1}}%
\@onlypreamble\pdftitle%
\newcommand\pdfauthor[1]{\def\pdf@author{#1}}%
\@onlypreamble\pdfauthor%
\newcommand\pdf@title@[1]{\ifx\pdf@title\@empty\pdftitle{#1}\fi}%
\@onlypreamble\pdf@title@%
\newcommand\pdf@author@[1]{\ifx\pdf@author\@empty\pdfauthor{#1}\fi}%
\@onlypreamble\pdf@author@%
\newcommand\pdfsubject[1]{\def\pdf@subject{#1}}%
\@onlypreamble\pdfsubject%
\newcommand\pdfkeywords[1]{\def\pdf@keywords{#1}}%
\@onlypreamble\pdfkeywords%
\newcommand\pdfsetup{%
  \@ifpackageloaded{hyperref}{%
    \hypersetup{%
      pdfauthor={\pdf@author},%
      pdftitle={\pdf@title},%
      pdfsubject={\pdf@subject},%
      pdfkeywords={\pdf@keywords}%
    }%
  }{}%
}%
\AtBeginDocument\pdfsetup%
%
\endinput%
%
